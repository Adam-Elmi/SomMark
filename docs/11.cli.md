# SomMark CLI Guide

The **SomMark CLI** allows you to compile `.smark` files into structured output formats directly from the terminal.

Supported output targets:

* **HTML**
* **Markdown**
* **MDX**
* **JSON**
* **Plain Text**

---

## Installation

You can run SomMark without installation using `npx`, or install it globally.

```bash
# Option 1: Run instantly (no install)
npx sommark [command]

# Option 2: Install globally
npm install -g sommark
```

After global installation:

```bash
sommark --version
```

---

## Command Structure

```
sommark [output-flag] [input-file] [options]
```

You must specify exactly one output format flag.

---

## 1. Basic Usage

### Convert to HTML

```bash
sommark --html index.smark
```

### Convert to Markdown

```bash
sommark --markdown index.smark
```

### Convert to MDX

```bash
sommark --mdx index.smark
```

### Convert to JSON

```bash
sommark --json index.smark
```

### Convert to Plain Text

```bash
sommark --text index.smark
```

---

## 2. Output Behavior

### Default Behavior

If no output path is specified:

* Output file is created
* In the same directory as the input file
* With the corresponding extension

Example:

```
index.smark → index.html
```

---

### Specify Output File and Directory

Use `-o` to define the output file name and optionally a directory.

```bash
sommark --html src/page.smark -o page.html ./dist
```

This will:

* Generate `page.html`
* Place it inside `./dist`

If the directory does not exist, it must be created beforehand.

---

### Print to Console (stdout)

Use `-p` to print the result instead of writing to a file.

```bash
sommark --html -p src/page.smark
```

Useful for:

* Piping output
* Debugging
* CI workflows

Example with piping:

```bash
sommark --html -p page.smark > output.html
```

---

## 3. Using a Configuration File

You can define custom mappers and behavior inside:

```
smark.config.js
```

The CLI automatically loads this file when it exists in the working directory.

### Example Configuration

```javascript
import { Mapper } from "sommark";

const Helper = new Mapper();

Helper.register("Block", ({ content }) => {
  return content;
});
```

Then simply run:

```bash
sommark --html page.smark
```

The CLI will use the custom mapper during compilation.

---

## 4. Example Workflow

### Project Structure

```
project/
 ├─ page.smark
 ├─ smark.config.js
 └─ dist/
```

### Compile

```bash
sommark --html page.smark -o page.html ./dist
```

### Result

```
project/dist/page.html
```

---

## 5. CLI Flags Reference

| Flag         | Short | Description                                       |
| ------------ | ----- | ------------------------------------------------- |
| `--help`     | `-h`  | Display help menu.                                |
| `--version`  | `-v`  | Show installed version.                           |
| `--html`     | —     | Output HTML file.                                 |
| `--markdown` | —     | Output Markdown file.                             |
| `--mdx`      | —     | Output MDX file.                                  |
| `--json`     | —     | Output JSON file.                                 |
| `--text`     | —     | Output plain text file.                           |
| `-o`         | —     | Specify output filename and optionally directory. |
| `--print`    | `-p`     | Print output to console (stdout).              |

---

## 6. Best Practices for Using SomMark CLI

* **Keep your config file in the project root**
  Place `smark.config.js` in the same folder as your `.smark` files so the CLI can automatically find it.

* **Use `-p` to print output**
  This shows the result in the terminal instead of creating a file. Useful for testing, automation, or CI pipelines.

* **Specify output paths**
  When building for production, always give an output file and folder using `-o` to avoid overwriting files.

* **Use only one output format at a time**
  Don’t combine `--html` and `--markdown` in a single command—pick one.

* **Check your `.smark` files first**
  Make sure your files have proper Blocks, Inlines, and Atblocks before compiling to avoid errors.



