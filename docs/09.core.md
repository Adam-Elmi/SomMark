# Core API Reference

The Core API lets you use SomMark **programmatically** in Node.js or browser-based JavaScript projects.

---

## Installation

```bash
npm install sommark
```

---

## 1. `transpile()` – Main Function

Converts SomMark source code into HTML, Markdown, MDX, or plain text.

```javascript
import { transpile } from "sommark";

const output = await transpile({
  src: "[Block]Hello[end]",
  format: "html" // 'html' | 'markdown' | 'mdx' | 'text'
});

console.log(output);
```

### Options

| Option            | Type    | Description                                                          |
| ----------------- | ------- | -------------------------------------------------------------------- |
| `src`             | string  | SomMark source code to compile (**required**)                        |
| `format`          | string  | Output format (`html`, `markdown`, `mdx`, `text`). Default: `'html'` |
| `includeDocument` | boolean | Wrap HTML in `<html><body>...</body></html>`. Default: `true`        |
| `mapperFile`      | Mapper  | Custom Mapper instance for custom tags/blocks                        |

---

## 2. Lexer & Parser (Advanced)

For advanced usage, you can access **tokens** and the **AST**.

### `lex(source)`

Generates tokens from source code:

```javascript
import { lex } from "sommark";

const tokens = lex("[Block](Hello)->(bold)[end]");
console.log(tokens);
```

### `parse(source)`

Generates an **Abstract Syntax Tree (AST)**:

```javascript
import { parse } from "sommark";

const ast = parse("[Block]Content[end]");
console.log(ast);
```

---

## 3. `SomMark` Class – Object-Oriented Approach

You can also use the `SomMark` class for a more structured approach:

```javascript
import SomMark from "sommark";

const compiler = new SomMark({
  src: "[Block]Hello[end]",
  format: "html"
});

const html = await compiler.transpile();
console.log(html);
```

* `src` → SomMark content
* `format` → Output format
* `transpile()` → Converts the content

---

> [!Tip]
> Use the Core API when integrating SomMark into applications, build scripts, or custom pipelines.
> For full method references, see the [API Directory](./api/).
