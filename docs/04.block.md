# Block Syntax

Blocks are the fundamental container structures in SomMark. They group content and define the scope for transformations applied to sections of a document.

Inline statements, at-blocks, and text must be defined inside a Block. Defining any of these at the top level will result in a parsing error.

At the top level, only Blocks and comments are permitted.

## Syntax

```ini
[Identifier]
Valid SomMark content...
[end]
```

- **Identifier**: The name of the block (e.g., `Block`, `Section`, `Div`).
- **Content**: Can contain text, other blocks, inline elements, or AtBlocks.
- **End**: The block must be closed with `[end]`.

## Arguments

Blocks can accept arguments to customize their behavior. Arguments are separated by commas.

### Positional Arguments
```ini
[Identifier=arg1, arg2]
```

### Key-Value Arguments
You can also use named arguments with `key:value` syntax.
```ini
[Identifier=key:value][end]
```

---
### ⚠️ Block Examples

> [!WARNING]
> Most Block examples in this documentation do **not** rely on default mappers.
> They demonstrate **custom mappers** to illustrate how transformation logic can be extended or overridden.
> Without a custom mapper registered, behavior may differ from what is illustrated.
> Confirm whether an example depends on a custom mapper before comparing results.


# SomMark – Block Examples

Blocks are the fundamental container structures in SomMark.
They group content and define transformation scope.

Only Blocks and comments are allowed at the top level.

---

## 1. Minimal Block

```
[Section]
Hello World
[end]
```

* `Section` is the Identifier
* Body contains plain text
* `[end]` closes the Block

---

## 2. Single-Line Block

Blocks are flexible and can be written inline:

```
[Section]Hello World[end]
```

Valid and equivalent to the previous example.

---

## 3. Multiline Identifier Formatting

Whitespace formatting is flexible:

```
[
Section
]
Hello World
[
end
]
```

Still valid.

---

## 4. Block with Positional Arguments

```
[Card = primary, large]
Content inside card
[end]
```

* `primary` → first argument
* `large` → second argument

Arguments are comma-separated.

---

## 5. Block with Key-Value Arguments

```
[Config = theme:dark, mode:production]
App configuration
[end]
```

* `theme` → key
* `dark` → value
* `mode` → key
* `production` → value

Colon `:` separates key and value.

---

## 6. Mixed Arguments

Blocks support mixing positional and key-value arguments:

```
[Button = primary, size:large, rounded]
Click Me
[end]
```

* `primary` → positional
* `size:large` → key-value
* `rounded` → positional

---

## 7. Nested Blocks

Blocks allow nesting.

```
[Layout]
    [Header]
    Welcome
    [end]

    [Content]
    Main content goes here
    [end]
[end]
```

The outer `Layout` contains two child Blocks.

---

## 8. Block Containing Inline Statement

Inline must exist inside a Block:

```
[Article]
(Hello)->(Bold)
[end]
```

Valid because Inline is inside a Block.

---

## 9. Block Containing Atblock

```
[Script]
@_Raw_@
This will not parse [anything] inside here.
@_end_@
[end]
```

Valid because Atblock is inside a Block.

---

## 10. Invalid Example (Top-Level Text)

**Invalid**:

```
Hello World
```

**Reason**:
Text cannot exist at top level. It must be wrapped in a Block.

Correct:

```
[Root]
Hello World
[end]
```

---

## 11. Invalid Example (Empty Body)

**Invalid**:

```
[Empty]
[end]
```

Block body cannot be empty.

---

## Summary

A Block consists of:

```
[Identifier = optional arguments]
Body (can be empty)
[end]
```

Rules:

* Identifier → letters and numbers only
* Arguments optional
* Supports positional and key-value
* Supports nesting
* Body can be empty
* Only Blocks allowed at top level
