# `safeArg()` — Safe Argument Checker

`safeArg()` ensures a target argument exists in a SomMark mapper and optionally validates its type.
It works with **positional arguments** (`index`) or **named arguments** (`key`) and supports type validation, transformation, and a **fallback value** if the argument is missing or invalid.

> [!Note]:
> All arguments from SomMark are **strings by default**. Use `setType` to convert the value (e.g., `Number`, `Boolean`) before type validation.

---

## Signature

```ts
safeArg(args, index?, key?, type = null, setType = null, fallBack = null)
```

### Parameters

* `args` — argument array from the mapper callback
* `index` — optional positional index
* `key` — optional named argument key
* `type` — optional JS type to validate (`"string"`, `"number"`, etc.)
* `setType` — optional function to transform the value before type check
* `fallBack` — optional value to return if no valid argument is found

**Rule:** At least one of `index` or `key` must be provided.

---

## How It Works

1. Checks `args[index]` first (if defined)
2. Then checks `args[key]` (if defined)
3. Applies `setType` if provided
4. Validates type if `type` is provided
5. Returns `fallBack` if no valid argument is found

---

## Examples

### Positional argument

```js
import { Mapper } from "sommark";

const helper = new Mapper();

helper.register("YouTube", ({ args }) => {
  const videoId = helper.safeArg(args, 0, null, "string");

  return helper
    .tag("iframe")
    .attributes({ src: `https://youtube.com/embed/${videoId}` })
    .body("");
});
```

Supports:

```
[YouTube = abc123][end]
```

---

### Named argument

```js
const videoId = helper.safeArg(args, undefined, "id", "string");
```

Supports:

```
[YouTube = id:abc123][end]
```

---

### With type transformation

```js
const width = helper.safeArg(args, 1, "width", "number", Number);
```

Supports:

```
[VideoPlayer = id:abc123, width:560][end]
```

* Converts `"560"` → `560`
* Validates type as `"number"`

---

### With fallback value

```js
const height = helper.safeArg(args, 2, "height", "number", Number, 400);
```

* If `args[2]` or `args["height"]` is missing → returns `400` instead of throwing

